{% extends "admin/index.html" %}
{% load i18n static %}

{% block content %}
<!-- Reportes Acad칠micos -->
<div class="module" style="margin-bottom: 20px;">
    <table style="width: 100%;">
        <caption>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>游늵 Reportes y Estad칤sticas</span>
            </div>
        </caption>
        <tbody>
            <tr>
                <td style="padding: 15px;">
                    <div style="margin-bottom: 10px;">
                        <a href="{% url 'reporte_academico' %}" class="button" style="background-color: #28a745; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin-right: 10px;">
                            <strong>游늵 Ver Reporte Online</strong>
                        </a>
                        <a href="{% url 'exportar_reporte_pdf' %}" class="button" style="background-color: #dc3545; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block; margin-right: 10px;">
                            <strong>游늯 PDF</strong>
                        </a>
                        <a href="{% url 'exportar_reporte_excel' %}" class="button" style="background-color: #198754; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; display: inline-block;">
                            <strong>游닁 Excel</strong>
                        </a>
                    </div>
                    <p style="margin-top: 10px; color: #666; font-size: 13px;">
                        Accede al reporte acad칠mico integral generado con el nuevo <strong>Motor de Reportes (Factory)</strong>.
                        <br>
                        <em>Visualiza gr치ficos interactivos o exporta los datos directamente.</em>
                    </p>
                </td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Herramientas del Sistema -->
<div class="module" style="margin-bottom: 20px;">
    <table style="width: 100%;">
        <caption>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <span>游댢 Herramientas del Sistema</span>
            </div>
        </caption>
        <tbody>
            <tr>
                <td style="padding: 15px;">
                    <form method="get" action="{% url 'admin_backup' %}" style="display: inline-block;">
                        <div style="margin-bottom: 10px;">
                            <label style="font-weight: bold; display: block; margin-bottom: 5px;">
                                游닍 Descargar Backup del Sistema
                            </label>
                            <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap;">
                                <input type="password" name="password" placeholder="Contrase침a (opcional)"
                                       style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 200px;">
                                <button type="submit" class="button" style="background-color: #417690; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
                                    <strong>Descargar Backup</strong>
                                </button>
                            </div>
                        </div>
                        <p style="margin-top: 10px; color: #666; font-size: 13px;">
                            Descarga un archivo con toda la informaci칩n del sistema: base de datos, configuraci칩n y archivos media.
                            <br>
                            <em>Si proporciona una contrase침a, el backup ser치 <strong>encriptado</strong> para mayor seguridad.</em>
                            <br>
                            <em>Sin contrase침a: archivo ZIP normal. Con contrase침a: archivo .enc encriptado.</em>
                        </p>
                    </form>
                </td>
            </tr>
            <tr>
                <td style="padding: 15px; border-top: 1px solid #eee;">
                    <form method="post" action="{% url 'admin_restore_backup' %}" enctype="multipart/form-data" onsubmit="return confirm('丘멆잺 ADVERTENCIA: Esta acci칩n reemplazar치 TODOS los datos actuales del sistema con los del backup.\n\n쮼st치 seguro de continuar?');">
                        {% csrf_token %}
                        <div style="margin-bottom: 10px;">
                            <label for="backup_file" style="font-weight: bold; display: block; margin-bottom: 5px;">
                                游댃 Restaurar Backup del Sistema
                            </label>
                            <div style="display: flex; align-items: center; gap: 10px; flex-wrap: wrap; margin-bottom: 10px;">
                                <input type="file" name="backup_file" id="backup_file" accept=".zip,.enc" required>
                                <input type="password" name="restore_password" placeholder="Contrase침a (si est치 encriptado)"
                                       style="padding: 8px; border: 1px solid #ccc; border-radius: 4px; width: 220px;">
                            </div>
                        </div>
                        <button type="submit" class="button" style="background-color: #ba2121; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">
                            <strong>Restaurar Backup</strong>
                        </button>
                        <p style="margin-top: 10px; color: #ba2121; font-size: 13px;">
                            <strong>丘멆잺 ADVERTENCIA:</strong> Esta acci칩n eliminar치 todos los datos actuales y los reemplazar치 con los datos del backup.
                            <br>
                            Aseg칰rese de tener un backup reciente antes de proceder.
                            <br>
                            <em>Acepta archivos .zip (sin encriptar) o .enc (encriptados). Si el archivo est치 encriptado, ingrese la contrase침a.</em>
                        </p>
                    </form>
                </td>
            </tr>
        </tbody>
    </table>
</div>

{{ block.super }}
{% endblock %}
